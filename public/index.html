<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>キャラクターセリフ管理</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">
        <!-- 初期選択画面 -->
        <div id="initial-screen" class="screen">
            <div class="container">
                <h1>キャラクターセリフ管理</h1>
                <div class="button-group">
                    <button id="load-existing" class="btn btn-primary">セリフを見る</button>
                    <button id="create-new" class="btn btn-secondary">新規作成</button>
                    <button id="delete-table" class="btn btn-danger">データを削除</button>
                    <button id="theme-settings" class="btn btn-secondary">テーマ設定</button>
                </div>
            </div>
        </div>

        <!-- 表一覧選択ポップアップ -->
        <div id="table-selection-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>表を選択</h2>
                
                <!-- タグフィルター -->
                <div class="tag-filter-container" style="margin-bottom: 20px;">
                    <div class="tag-filter-header">
                        <span>タグで絞り込み:</span>
                    </div>
                    <div id="table-selection-tag-filter" class="tag-filter-list">
                        <!-- タグフィルターがここに動的に追加されます -->
                    </div>
                </div>
                
                <div id="table-list" class="table-list">
                    <!-- 表一覧がここに動的に追加されます -->
                </div>
                <div class="modal-buttons">
                    <button id="close-selection" class="btn btn-secondary">キャンセル</button>
                </div>
            </div>
        </div>

        <!-- 表削除選択モーダル -->
        <div id="table-delete-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>削除する表を選択</h2>
                <div class="delete-mode">
                    <span>削除モード: 削除する表をクリックで選択してください</span>
                </div>
                <div id="table-delete-list" class="table-list">
                    <!-- 表一覧がここに動的に追加されます -->
                </div>
                <div class="modal-buttons">
                    <button id="confirm-table-delete" class="btn btn-danger">選択した表を削除</button>
                    <button id="close-delete-selection" class="btn btn-secondary">キャンセル</button>
                </div>
            </div>
        </div>

        <!-- テーマ設定モーダル -->
        <div id="theme-settings-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>テーマ設定</h2>
                <div class="theme-selection">
                    <div class="theme-option" data-theme="strawberry-milk">
                        <div class="theme-preview strawberry-milk-theme"></div>
                        <div class="theme-name">いちごみるく</div>
                    </div>
                    <div class="theme-option" data-theme="cotton">
                        <div class="theme-preview cotton-theme"></div>
                        <div class="theme-name">コットン</div>
                    </div>
                    <div class="theme-option" data-theme="pudding-a-la-mode">
                        <div class="theme-preview pudding-theme"></div>
                        <div class="theme-name">プリンアラモード</div>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button id="close-theme-settings" class="btn btn-secondary">閉じる</button>
                </div>
            </div>
        </div>

        <!-- タグ編集モーダル -->
        <div id="tag-edit-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2>タグを編集</h2>
                <div class="tag-edit-instructions">
                    <p>現在のタグを編集してください（カンマ区切りで入力）:</p>
                </div>
                <div class="tag-edit-input-container">
                    <input type="text" id="tag-edit-input" placeholder="例: 主人公,ヒロイン,メインキャラ" class="tag-edit-input">
                </div>
                <div class="modal-buttons">
                    <button id="save-tags" class="btn btn-primary">保存</button>
                    <button id="close-tag-edit" class="btn btn-secondary">キャンセル</button>
                </div>
            </div>
        </div>

        <!-- メイン作業画面 -->
        <div id="main-screen" class="screen" style="display: none;">
            <div class="container">
                <div class="header">
                    <div class="title-section">
                        <h1 id="current-table-name">キャラクターセリフ表</h1>
                        <div id="table-tags" class="table-tags">
                            <!-- タグがここに動的に追加されます -->
                        </div>
                    </div>
                    <div class="header-buttons">
                        <button id="edit-tags" class="btn btn-secondary">タグを編集</button>
                        <button id="back-to-home" class="btn btn-secondary">ホームに戻る</button>
                    </div>
                </div>

                <!-- 検索機能 -->
                <div class="search-container">
                    <input type="text" id="search-input" placeholder="セリフやストーリー名で検索..." class="search-input">
                    <button id="toggle-favorite-filter" class="btn btn-secondary">お気に入りのみ表示</button>
                    <button id="clear-search" class="btn btn-secondary">検索クリア</button>
                </div>

                <!-- 操作ボタン -->
                <div class="controls">
                    <button id="add-row" class="btn btn-primary">行を追加</button>
                    <button id="delete-row" class="btn btn-danger">行を削除</button>
                    <button id="save-table" class="btn btn-success">保存</button>
                </div>

                <!-- 削除モード表示 -->
                <div id="delete-mode-indicator" class="delete-mode" style="display: none;">
                    <span>削除モード: 削除する行をクリックで選択してください</span>
                    <button id="confirm-delete" class="btn btn-danger">選択した行を削除</button>
                    <button id="cancel-delete" class="btn btn-secondary">キャンセル</button>
                </div>

                <!-- セリフ表 -->
                <div class="table-container">
                    <table id="dialogue-table">
                        <thead>
                            <tr>
                                <th>セリフ</th>
                                <th>ストーリー名</th>
                            </tr>
                        </thead>
                        <tbody id="table-body">
                            <!-- 行がここに動的に追加されます -->
                        </tbody>
                    </table>
                </div>
            </div>
    </div>

    <script src="app.js"></script>
</body>
</html>